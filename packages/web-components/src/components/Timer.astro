---
---
<web-timer>
  <button aria-label="add-timer">Add timer</button>
  <div aria-label="timers">
  </div>
</web-timer>

<script>
  class WebTimer extends HTMLElement {
    constructor() {
      super();

      // TODO consider moving this to a class property
      const timersDiv = this.querySelector("[aria-label='timers']");
      const addTimerButton = this.querySelector("[aria-label='add-timer']");

      // TODO Consider adding this only after the component has mounted
      timersDiv.textContent = "No timers running";

      addTimerButton?.addEventListener("click", () => {
        // TODO move this to a reuseable function
        if (timersDiv.textContent === "No timers running") {
          timersDiv.textContent = null;
        }

        const countParagraph = document.createElement("p");
        const countSpan = document.createElement("span");
        let count = 0;

        // TODO keep track of all the timers so they can be cleared
        const timer = setInterval(() => {
          count++;
          countSpan.textContent = count.toString();
        }, 1000);
        
        countParagraph.textContent = "Count: ";
        countSpan.textContent = count.toString();
        countParagraph.appendChild(countSpan);
        timersDiv.appendChild(countParagraph);
      });
    }
  }

  customElements.define("web-timer", WebTimer);
</script>
